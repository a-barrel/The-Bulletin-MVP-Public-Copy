#!/usr/bin/env node
const center = { lat: 33.7839, lon: -118.1142 };
const spacingMiles = 2;
const milesToDegreesLat = (miles) => miles / 69;
const milesToDegreesLon = (miles) => miles / (69 * Math.cos((center.lat * Math.PI) / 180));
const latSpacing = milesToDegreesLat(spacingMiles);
const lonSpacing = milesToDegreesLon(spacingMiles);
const radiusMeters = 2600;
const ownerIds = [
  '68e061721329566a22d474a7',
  '68e061721329566a22d474a8',
  '68e061721329566a22d474a9',
  '68e061721329566a22d47510',
  '68e061721329566a22d47511'
];
const baseIdPrefix = '68e061721329566a22d400'; // 22 hex chars
const formatIndexHex = (index) => index.toString(16).padStart(2, '0');
const rooms = [];
let idx = 0;
for (let row = -2; row <= 2; row += 1) {
  for (let col = -2; col <= 2; col += 1) {
    const lat = Number((center.lat + row * latSpacing).toFixed(6));
    const lon = Number((center.lon + col * lonSpacing).toFixed(6));
    const ownerId = ownerIds[(idx) % ownerIds.length];
    const hexSuffix = formatIndexHex(idx);
    rooms.push({
    _id: { $oid: `${baseIdPrefix}${hexSuffix}` },
      ownerId: { $oid: ownerId },
      name: `CSULB Grid R${row + 3}C${col + 3}`,
      description: 'Autogenerated overlap grid cell for CSULB proximity demos.',
      coordinates: {
        type: 'Point',
        coordinates: [lon, lat],
        accuracy: 6
      },
      radiusMeters,
      participantCount: 1,
      participantIds: [{ $oid: ownerId }],
      moderatorIds: [{ $oid: ownerId }],
      audit: {
        createdBy: { $oid: ownerId },
        updatedBy: { $oid: ownerId }
      },
      createdAt: { $date: '2026-10-20T00:00:00.000Z' },
      updatedAt: { $date: '2026-10-20T00:00:00.000Z' }
    });
    idx += 1;
  }
}
console.log(JSON.stringify(rooms, null, 2));
